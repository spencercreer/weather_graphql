(this.webpackJsonpweather_dashboard=this.webpackJsonpweather_dashboard||[]).push([[0],{77:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(25),i=n.n(c),o=(n(77),n(4)),s=n(2);function l(){return Object(s.jsx)("header",{children:Object(s.jsx)("h1",{className:"text-center bg-primary text-light",children:"Weather GraphQL"})})}function d(){return Object(s.jsx)("footer",{className:"footer mt-auto",children:Object(s.jsx)("div",{className:"container py-3",children:Object(s.jsxs)("span",{className:"text-muted",children:["Coded by Spencer Creer using OpenWeather API",Object(s.jsx)("a",{className:"text-dark link-text mx-2",href:"https://www.linkedin.com/in/spencer-creer-023246109/",target:"_blank",rel:"noreferrer",style:{fontSize:"25px",color:"black"},children:Object(s.jsx)("i",{className:"fa fa-linkedin-square link-in"})}),Object(s.jsx)("a",{className:"text-dark link-text mx-2 pt-3",href:"https://github.com/spencercreer",target:"_blank",rel:"noreferrer",children:Object(s.jsx)("i",{className:"fa fa-github link-git",style:{fontSize:"25px"}})})]})})})}var j=n(13),h=n(27),b=n(104),u=n(59),m=n(88);function x(e){var t=e.handleSearch,n=Object(a.useState)(""),r=Object(j.a)(n,2),c=r[0],i=r[1],o=function(){t(c),i("")};return Object(s.jsxs)(b.a,{className:"mb-3",children:[Object(s.jsx)(u.a,{type:"text",id:"city-input",placeholder:"Search City",value:c,onChange:function(e){i(e.target.value)},onKeyUp:function(e){13===e.keyCode&&(t(c),i(""))},onBlur:o}),Object(s.jsx)(m.a,{id:"search-btn",className:"fas fa-search",variant:"outline-primary",onClick:o})]})}var p=n(98);function O(e){var t=e.city,n=e.error;return Object(s.jsx)(s.Fragment,{children:n&&Object(s.jsxs)(p.a,{variant:"danger",children:[Object(s.jsx)("strong",{children:t})," not found"]})})}function f(e){var t=e.history,n=e.handleSearch,a=function(e){n(e.target.value)};return Object(s.jsx)("div",{className:"list-group cityList pl-0",children:t.map((function(e,t){return Object(s.jsx)("button",{className:"list-group-item list-group-item-action pl-0",onClick:a,value:e,children:e},t)}))})}var g,v,y=n(102),w=n(93),S=n(94),C=n(31),N=n.n(C),k=n(28),F=n(103),_=y.a.Title,T=y.a.Body,$=y.a.Text,U=Object(k.a)(g||(g=Object(h.a)(["\n  query WeatherQuery($lat: Float!, $lon: Float!) {\n    weather(lat: $lat, lon: $lon){\n      timezone_offset\n      current {\n        temp\n        humidity\n        uvi\n        wind_speed\n        wind_deg\n        weather {\n          icon\n        }\n      }\n    }\n  }\n"]))),z=Object(k.a)(v||(v=Object(h.a)(["\n  query LocationQuery($lat: Float!, $lon: Float!) {\n    location(lat: $lat, lon: $lon) {\n      results {\n        locations {\n          adminArea1\n          adminArea3\n          adminArea5\n        }\n      }\n    }\n  }\n"])));function L(e){var t=e.convertTemp,n=e.tempUnit,a=e.coords,r=e.handleError,c=Object(F.a)(U,{variables:{lat:a.lat,lon:a.lon}}),i=c.loading,o=c.data,l=c.error,d=Object(F.a)(z,{variables:{lat:a.lat,lon:a.lon}}),j=d.loading,h=d.data,b=d.error;if(l||b)return r(),null;if(h)var u=h.location.results[0].locations[0].adminArea1,m=(h.location.results[0].locations[0].adminArea3,h.location.results[0].locations[0].adminArea5);if(o){console.log(o);var x=o.weather,O=x.current,f=O.humidity,g=O.temp,v=O.uvi,C=O.weather,k=O.wind_deg,L=O.wind_speed,E=x.timezone_offset,I=C[0].icon?"http://openweathermap.org/img/wn/".concat(C[0].icon,"@2x.png"):"http://openweathermap.org/img/wn/03n.png",A={transform:"rotate(".concat(k-43||-43,"deg)"),display:"inline-block",fontSize:"10px"},q="";q=v<=2?"success":v>2&&v<=7?"warning":"danger"}return i||j?Object(s.jsxs)("div",{style:{position:"relative"},children:[Object(s.jsx)(w.a,{animation:"border",variant:"primary",className:"m-3",style:{position:"absolute",top:"20px"}}),Object(s.jsx)(y.a,{style:{opacity:"0.5",height:"305px"},className:"mb-2"})]}):Object(s.jsx)(y.a,{style:{height:"305px"},className:"mb-2",children:Object(s.jsxs)(T,{children:[Object(s.jsx)($,{children:N()().utcOffset(E/60).format("LLLL")}),Object(s.jsxs)(_,{children:[m,", ",u,Object(s.jsx)(S.a,{src:I,style:{display:"inline-block",height:"60px",width:"60px"},rounded:!0})]}),Object(s.jsxs)($,{children:[t(g)+String.fromCharCode(176)," ",n]}),Object(s.jsxs)($,{children:["Humidity: ",f,"%"]}),Object(s.jsxs)($,{children:[Object(s.jsxs)("span",{style:{marginRight:"3px"},children:["Wind Speed: ",L,"mph"]}),Object(s.jsx)("span",{style:A,children:Object(s.jsx)("i",{className:"fas fa-location-arrow"})})]}),Object(s.jsxs)(p.a,{className:"p-0",variant:q,children:["UV Index: ",v]})]})})}var E,I=n(95),A=n(66),q=y.a.Title,B=y.a.Body,P=y.a.Text;function Q(e){var t,n=e.index,a=e.forecast,r=e.locationTime,c=e.convertTemp,i=e.tempUnit,o=(e.loading,(null===a||void 0===a?void 0:a.wind_deg)-43||-43),l={transform:"rotate(".concat(o,"deg)"),display:"inline-block",fontSize:"10px"},d=null!==a&&void 0!==a&&null!==(t=a.weather[0])&&void 0!==t&&t.icon?"http://openweathermap.org/img/wn/".concat(a.weather[0].icon,"@2x.png"):"http://openweathermap.org/img/wn/03n.png",j="",h=(null===a||void 0===a?void 0:a.uvi)||0;return j=h<=2?"success":h>2&&h<=7?"warning":"danger",Object(s.jsx)(A.a,{md:!0,className:"px-1",children:Object(s.jsx)(y.a,{children:Object(s.jsxs)(B,{children:[Object(s.jsx)(q,{children:N()(r).add(n,"days").format("dddd")}),Object(s.jsxs)(P,{children:[c(null===a||void 0===a?void 0:a.temp.min),"/",c(null===a||void 0===a?void 0:a.temp.max)+String.fromCharCode(176)," ",i,Object(s.jsx)(S.a,{src:d,style:{display:"inline-block",height:"35px",width:"35px"},rounded:!0})]}),Object(s.jsxs)(P,{children:["Humidity: ",null===a||void 0===a?void 0:a.humidity,"%"]}),Object(s.jsxs)(P,{children:["Wind: ",null===a||void 0===a?void 0:a.wind_speed,"mph  ",Object(s.jsx)("span",{style:l,children:Object(s.jsx)("i",{className:"fas fa-location-arrow"})})]}),Object(s.jsxs)(p.a,{className:"p-0",variant:j,children:["UV Index: ",h]})]})})})}Q.defaultProps={forecast:{}};var W=Object(k.a)(E||(E=Object(h.a)(["\n    query ForecastQuery($lat: Float!, $lon: Float!) {\n        weather(lat: $lat, lon: $lon) {\n        timezone_offset\n        daily {\n            temp {\n                min\n                max\n            }\n            humidity\n            uvi\n            wind_speed\n            wind_deg\n            weather {\n                icon\n            }\n        }\n    }\n}\n"])));function H(e){var t=e.convertTemp,n=e.tempUnit,a=e.coords,r=(e.handleError,Object(F.a)(W,{variables:{lat:a.lat,lon:a.lon}})),c=r.loading,i=(r.error,r.data),o=[];if(i){console.log(i);var l=i.weather,d=l.daily,j=l.timezone_offset;o=d.slice(0,5)}return c?Object(s.jsx)(w.a,{animation:"border",variant:"primary",className:"m-3",style:{opacity:"0.5"}}):Object(s.jsx)(I.a,{children:o.map((function(e,a){return Object(s.jsx)(Q,{index:a+1,forecast:e,locationTime:N()().utcOffset(j/60),convertTemp:t,tempUnit:n,loading:c},a)}))})}var J,V=n(96),D=n(100),G=Object(k.a)(J||(J=Object(h.a)(["\n    query CityCoordsQuery($city: String!) {\n        cityCoords(city: $city) {\n            coord {\n                lat\n                lon\n            }\n        }\n    }\n"]))),K=function(){var e=Object(a.useState)({lat:51.5,lon:.1276}),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)("Phoenix"),i=Object(j.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(!1),h=Object(j.a)(d,2),b=h[0],u=h[1],m=Object(a.useState)([]),p=Object(j.a)(m,2),g=p[0],v=p[1],y=Object(a.useState)("F"),S=Object(j.a)(y,2),C=S[0],N=S[1];Object(a.useEffect)((function(){var e=!0;if(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){r({lat:e.coords.latitude,lon:e.coords.longitude})})):r({lat:51.5,lon:.1276});var t=JSON.parse(localStorage.getItem("searchHistory"))||[];v(t)}return function(){return e=!1}}),[]);var k=function(e){l(e),T(e)},_=function(){return u(!0)},T=function(e){g.find((function(t){return t===e}))||(g.unshift(e),g.length>6&&g.pop(),localStorage.setItem("searchHistory",JSON.stringify(g)))},$=function(){N("F"===C?"C":"F")},U=function(e){var t;return"F"===C?t=1.8*(e-273.15)+32:"C"===C&&(t=e-273.15),t.toFixed()},z=Object(F.a)(G,{variables:{city:o}}),E=z.data;if(z.loading)return Object(s.jsx)(w.a,{animation:"border",variant:"primary",className:"m-3",style:{opacity:"0.5"}});if(E){var q={lat:E.cityCoords.coord.lat,lon:E.cityCoords.coord.lon};return Object(s.jsxs)(V.a,{className:"px-5",fluid:!0,children:[Object(s.jsx)(D.a,{children:Object(s.jsx)(D.a.Switch,{label:"".concat(String.fromCharCode(176)).concat(C),onChange:$})}),Object(s.jsxs)(I.a,{children:[Object(s.jsxs)(A.a,{sm:4,children:[Object(s.jsx)(x,{handleSearch:k}),Object(s.jsx)(O,{error:b}),Object(s.jsx)(f,{history:g,handleSearch:k})]}),Object(s.jsx)(A.a,{sm:8,className:"px-1",children:Object(s.jsx)(L,{coords:q,convertTemp:U,tempUnit:C,handleError:_})})]}),Object(s.jsx)(H,{coords:q,convertTemp:U,tempUnit:C,handleError:_})]})}return Object(s.jsxs)(V.a,{className:"px-5",fluid:!0,children:[Object(s.jsx)(D.a,{children:Object(s.jsx)(D.a.Switch,{label:"".concat(String.fromCharCode(176)).concat(C),onChange:$})}),Object(s.jsxs)(I.a,{children:[Object(s.jsxs)(A.a,{sm:4,children:[Object(s.jsx)(x,{handleSearch:k}),Object(s.jsx)(O,{error:b}),Object(s.jsx)(f,{history:g,handleSearch:k})]}),Object(s.jsx)(A.a,{sm:8,className:"px-1",children:Object(s.jsx)(L,{coords:n,convertTemp:U,tempUnit:C,handleError:_})})]}),Object(s.jsx)(H,{coords:n,convertTemp:U,tempUnit:C,handleError:_})]})},M=n(68),R=n(99),X=n(101),Y=n(97),Z=n(67),ee=Object(M.a)({uri:"/graphql"}),te=Object(Z.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(o.a)(Object(o.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),ne=new R.a({link:te.concat(ee),cache:new X.a});var ae=function(){return Object(s.jsxs)(Y.a,{client:ne,children:[Object(s.jsx)(l,{}),Object(s.jsx)(K,{}),Object(s.jsx)(d,{})]})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,106)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(ae,{})}),document.getElementById("root")),re()}},[[83,1,2]]]);
//# sourceMappingURL=main.0a11ed60.chunk.js.map